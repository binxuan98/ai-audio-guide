# AI语音导览小程序

## 项目简介

这是一个基于微信小程序的AI语音导览应用，为用户提供智能化的景点讲解服务。

## 功能特性

### 🗺️ 智能定位
- 自动获取用户位置
- 完整的定位权限处理流程
- 支持系统级和小程序级权限管理

### 🎯 景点识别
- 基于地理位置自动识别周边景点
- 实时获取景点信息
- 智能标记显示

### 🎨 多风格讲解
- 历史文化风格
- 趣闻轶事风格
- 诗词文学风格
- 人物故事风格

### 🔊 语音播放
- AI生成的个性化讲解内容
- 高质量语音合成
- 完整的音频播放控制

### 🎨 现代化UI
- 渐变色彩设计
- 流畅的动画效果
- 响应式布局
- 优雅的交互体验

## 项目结构

```
miniapp/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── project.config.json   # 项目配置
├── project.private.config.json # 私有配置
├── assets/               # 静态资源
│   └── icon-headphone.svg # 耳机图标
├── pages/                # 页面目录
│   └── index/           # 首页
│       ├── index.js     # 页面逻辑
│       ├── index.wxml   # 页面结构
│       └── index.wxss   # 页面样式
└── README.md            # 项目说明
```

## 技术实现

### 前端技术栈
- **微信小程序框架**：原生小程序开发
- **地图组件**：微信小程序地图API
- **音频播放**：InnerAudioContext API
- **网络请求**：wx.request API

### 后端集成
- **API接口**：与后端服务无缝对接
- **数据格式**：标准JSON数据交换
- **错误处理**：完善的异常处理机制

## 核心功能模块

### 1. 位置服务模块
```javascript
// 获取用户位置
getUserLocation()
// 处理定位权限
handleLocationPermission()
// 获取周边景点
getNearbySpots()
```

### 2. 音频播放模块
```javascript
// 初始化音频
initAudio()
// 播放控制
playAudio()
// 事件监听
audioEventHandlers()
```

### 3. UI交互模块
```javascript
// 风格选择
onStyleTap()
// 生成讲解
handlePlay()
// 状态管理
stateManagement()
```

## 样式设计

### 设计理念
- **现代化**：采用渐变色彩和圆角设计
- **层次感**：通过阴影和层级营造空间感
- **交互性**：丰富的hover和active状态
- **一致性**：统一的设计语言和视觉风格

### 色彩方案
- **主色调**：蓝紫渐变 (#667eea → #764ba2)
- **辅助色**：橙黄渐变 (#ffeaa7 → #fab1a0)
- **强调色**：绿青渐变 (#00b894 → #00cec9)
- **背景色**：浅灰色 (#f8f9fa)

## 开发指南

### 环境要求
- 微信开发者工具 最新版本
- Node.js 14.0+
- 微信小程序开发账号

### 本地开发
1. 使用微信开发者工具打开项目
2. 配置AppID
3. 启动后端服务（localhost:5001）
4. 开始开发调试

### 配置说明
- **AppID**：在project.config.json中配置
- **后端地址**：在代码中修改API请求地址
- **权限配置**：在app.json中配置所需权限

## API接口

### 获取景点信息
```
POST /guide
{
  "latitude": 39.9042,
  "longitude": 116.4074,
  "type": "nearby",
  "range": 1000,
  "guide_style": "历史文化",
  "disable_llm": false,
  "disable_tts": false
}
```

### 获取讲解风格
```
GET /guide/styles
```

## 注意事项

### 权限处理
- 确保正确处理定位权限
- 提供友好的权限引导
- 处理权限拒绝的情况

### 性能优化
- 合理使用setData
- 避免频繁的网络请求
- 优化图片和资源加载

### 兼容性
- 测试不同机型的兼容性
- 处理网络异常情况
- 考虑低版本微信的兼容

## 部署发布

### 发布流程
1. 代码审查和测试
2. 版本号更新
3. 上传代码到微信后台
4. 提交审核
5. 发布上线

### 版本管理
- 遵循语义化版本规范
- 维护详细的更新日志
- 做好版本回滚准备

## 故障排除

### 常见问题
1. **定位失败**：检查权限设置和网络连接
2. **音频播放失败**：检查音频文件格式和网络
3. **API请求失败**：检查后端服务状态
4. **样式显示异常**：检查CSS兼容性

### 调试技巧
- 使用console.log输出调试信息
- 利用微信开发者工具的调试功能
- 真机测试验证功能

## 更新日志

### v1.0.0 (2024-01-XX)
- ✨ 完整的项目结构优化
- 🎨 现代化UI设计
- 🔧 完善的功能实现
- 📱 优秀的用户体验
- 🛠️ 健壮的错误处理

## 贡献指南

欢迎提交Issue和Pull Request来改进项目！

## 许可证

MIT License